<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MegaStudy Digital Studylog - Navy Edition</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
  <style>
    body { font-family: 'Pretendard', sans-serif; background-color: #f8fafc; color: #0f172a; }
    .navy-bg { background-color: #0f172a; }
    .navy-text { color: #0f172a; }
    .navy-border { border-color: #1e293b; }
    .glass-effect { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
    .planner-card { border-radius: 12px; border: 1px solid #e2e8f0; background: white; transition: all 0.2s ease; }
    .planner-card:hover { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
    .sidebar-item { transition: all 0.2s; border-radius: 8px; cursor: pointer; }
    .sidebar-item:hover { background-color: rgba(255, 255, 255, 0.1); }
    .sidebar-active { background-color: #1e293b; border-left: 4px solid #3b82f6; }
    .mandalart-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 4px; background: #e2e8f0; border: 2px solid #1e293b; }
    .mandalart-cell { background: white; aspect-ratio: 1/1; display: flex; align-items: center; justify-content: center; padding: 4px; text-align: center; font-size: 11px; }
    .mandalart-center { background: #f1f5f9; font-weight: bold; color: #1e293b; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // --- 네이비 테마 아이콘 세트 ---
    const Icons = {
      Dashboard: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>,
      Goals: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" /></svg>,
      Management: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>,
      Note: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>,
      User: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
    };

    // --- 1. 대시보드 - PDF의 '한 달 학습 계획'과 '타임레코드' 스타일 반영 ---
    const StudyDashboard = ({ user, studyPlan }) => {
      return (
        <div className="space-y-6">
          <div className="flex justify-between items-end">
            <div>
              <h2 className="text-3xl font-bold navy-text">STUDYLOG 2025</h2>
              <p className="text-gray-500">Premium Digital Studylog - Navy Edition</p>
            </div>
            <div className="text-right">
              <span className="text-sm font-bold text-indigo-600">TODAY</span>
              <p className="text-xl font-mono">2025. 01. 07</p>
            </div>
          </div>

          <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
            {/* 좌측: To-do List (PDF 스타일) */}
            <div className="lg:col-span-2 planner-card p-6 shadow-sm border-t-4 navy-border">
              <div className="flex justify-between items-center mb-6">
                <h3 className="text-xl font-bold flex items-center gap-2">
                  <span className="w-2 h-6 navy-bg rounded-full"></span> DAILY TO-DO LIST
                </h3>
                <button className="text-xs navy-bg text-white px-3 py-1 rounded">ADD TASK</button>
              </div>
              <div className="space-y-4">
                {studyPlan.map((plan, idx) => (
                  <div key={idx} className="flex items-center gap-4 p-4 rounded-lg bg-slate-50 group">
                    <div className={`w-3 h-3 rounded-full bg-${plan.color}-400`}></div>
                    <div className="flex-1">
                      <p className="text-xs font-bold text-gray-400 uppercase">{plan.subject}</p>
                      <p className="text-lg font-medium">{plan.content || '기록된 계획이 없습니다.'}</p>
                    </div>
                    <input type="checkbox" className="w-6 h-6 rounded-full border-2 navy-border" />
                  </div>
                ))}
              </div>
            </div>

            {/* 우측: 타임 레코드 (PDF 스타일) */}
            <div className="planner-card p-6 shadow-sm border-t-4 navy-border">
              <h3 className="text-xl font-bold mb-6 flex items-center gap-2">
                <span className="w-2 h-6 navy-bg rounded-full"></span> TIME RECORD
              </h3>
              <div className="space-y-2">
                {Array.from({ length: 14 }).map((_, i) => {
                  const hour = i + 9;
                  return (
                    <div key={hour} className="flex items-center gap-3">
                      <span className="text-xs font-mono text-gray-400 w-8">{hour}:00</span>
                      <div className="flex-1 h-6 bg-slate-100 rounded flex gap-1 p-1">
                        <div className="flex-1 bg-indigo-100 rounded-sm"></div>
                        <div className="flex-1 bg-indigo-200 rounded-sm"></div>
                        <div className="flex-1 bg-indigo-100 rounded-sm"></div>
                        <div className="flex-1 bg-slate-50 rounded-sm"></div>
                      </div>
                    </div>
                  );
                })}
              </div>
            </div>
          </div>
        </div>
      );
    };

    // --- 2. 목표달성 - 만다라트 UI 반영 ---
    const MandalartView = () => (
      <div className="planner-card p-8 shadow-sm max-w-4xl mx-auto">
        <h3 className="text-2xl font-bold mb-2 text-center navy-text">Manda-rat : 2025 GOALS</h3>
        <p className="text-center text-gray-500 mb-8">나의 목표를 세부적으로 시각화합니다.</p>
        <div className="grid grid-cols-3 gap-2 bg-slate-200 p-2 rounded-xl">
          {Array.from({ length: 9 }).map((_, i) => (
            <div key={i} className="mandalart-grid">
              {Array.from({ length: 9 }).map((_, j) => (
                <div key={j} className={`mandalart-cell ${i === 4 && j === 4 ? 'navy-bg text-white' : (j === 4 ? 'mandalart-center' : '')}`}>
                  {i === 4 && j === 4 ? '최종목표' : (j === 4 ? `핵심${i+1}` : '')}
                </div>
              ))}
            </div>
          ))}
        </div>
      </div>
    );

    // --- 메인 레이아웃 및 내비게이션 ---
    function App() {
      const [view, setView] = useState('dashboard');
      const [user, setUser] = useState({ displayName: "홍길동", email: "user@test.com" });
      const [studyPlan, setStudyPlan] = useState([
        { subject: '국어', color: 'purple', content: '문학 기출 1회독' },
        { subject: '수학', color: 'pink', content: '미적분 킬러 문항 분석' },
        { subject: '영어', color: 'orange', content: '단어 200개 암기' },
        { subject: '탐구', color: 'blue', content: '물리학I 개념 정리' }
      ]);

      return (
        <div className="flex min-h-screen">
          {/* 사이드바 (PDF INDEX 스타일) */}
          <aside className="w-64 navy-bg text-white p-6 flex flex-col fixed h-full">
            <div className="mb-10">
              <h1 className="text-2xl font-bold tracking-tighter">MEGASTUDY</h1>
              <p className="text-[10px] opacity-50 uppercase">Digital Studylog 2025</p>
            </div>

            <nav className="flex-1 space-y-1">
              <div className="text-[11px] text-gray-500 font-bold mb-2 px-3">HOME</div>
              <div className={`sidebar-item flex items-center gap-3 p-3 ${view === 'dashboard' && 'sidebar-active'}`} onClick={() => setView('dashboard')}>
                <Icons.Dashboard /> Dashboard
              </div>

              <div className="text-[11px] text-gray-500 font-bold mt-6 mb-2 px-3 uppercase">Plan & Goals</div>
              <div className={`sidebar-item flex items-center gap-3 p-3 ${view === 'mandalart' && 'sidebar-active'}`} onClick={() => setView('mandalart')}>
                <Icons.Goals /> 만다라트
              </div>
              <div className="sidebar-item flex items-center gap-3 p-3 opacity-50">
                <Icons.Management /> 학습관리
              </div>
              
              <div className="text-[11px] text-gray-500 font-bold mt-6 mb-2 px-3 uppercase">Grades & Notes</div>
              <div className="sidebar-item flex items-center gap-3 p-3 opacity-50">
                <Icons.Note /> 성적관리표
              </div>
              <div className="sidebar-item flex items-center gap-3 p-3 opacity-50">
                <Icons.Management /> 오답노트
              </div>
            </nav>

            <div className="mt-auto pt-6 border-t border-slate-700 flex items-center gap-3">
              <div className="w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center">
                <Icons.User />
              </div>
              <div className="overflow-hidden">
                <p className="text-sm font-bold truncate">{user.displayName}</p>
                <p className="text-[10px] opacity-50 truncate">{user.email}</p>
              </div>
            </div>
          </aside>

          {/* 메인 콘텐츠 영역 */}
          <main className="ml-64 flex-1 p-10">
            {view === 'dashboard' && <StudyDashboard user={user} studyPlan={studyPlan} />}
            {view === 'mandalart' && <MandalartView />}
            
            {/* 하단 플로팅 캠 스터디 버튼 */}
            <button className="fixed bottom-8 right-8 navy-bg text-white px-6 py-4 rounded-full shadow-2xl flex items-center gap-3 hover:scale-105 transition-transform">
              <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
              <span className="font-bold">CAM STUDY</span>
            </button>
          </main>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
